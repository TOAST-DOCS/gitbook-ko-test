## Database > RDS for MS-SQL > 파라미터 그룹

## 파라미터 그룹

DB 인스턴스에 설치된 Microsoft SQL Server의 설정을 적용하기 위해서 RDS for MS-SQL은 파라미터 그룹 기능을 제공합니다. 파라미터 그룹은 Microsoft SQL Server를 설정할 수 있는 파라미터의 집합입니다.
RDS for MS-SQL은 서비스 활성화 시, 기본 파라미터 그룹인 `default.paramter-gruop`을 제공하며, 기본 파라미터 그룹은 삭제 및 변경이 불가능합니다.
DB 인스턴스는 하나의 파라미터 그룹을 사용할 수 있으며, 여러 DB 인스턴스에서 동시에 사용 가능합니다.

### 파라미터 그룹 상태

파라미터 그룹의 상태는 아래와 같은 값들로 구성되며, 사용자의 행위와 현재 상태에 따라 변경됩니다.

| 상태           | 설명                                  |
|--------------|-------------------------------------|
| 적용 완료        | 파라미터 그룹과 연결된 모든 DB 인스턴스가 적용 완료된 상태  |
| 적용 중         | 파라미터 그룹이 DB 인스턴스에 적용 중인 상태          |
| 적용 필요        | 파라미터 그룹이 변경되었지만 DB 인스턴스에 적용되지 않은 상태 |

### 파라미터 그룹 생성 및 삭제

파라미터 그룹은 기존 파라미터 그룹을 복사해 새로 생성할 수 있습니다. 복사된 파라미터 그룹은 원본 파라미터 그룹의 파라미터값만 복사할 뿐, 어떠한 연관도 없습니다.
파라미터 그룹 삭제는 해당 파라미터 그룹을 사용 중인 DB 인스턴스가 없을 때만 가능하며, 사용 중인 DB 인스턴스가 존재하면 삭제할 수 없습니다.

## 파라미터

파라미터는 아래와 같은 정보를 담고 있습니다.

* 이름
    * 파라미터 이름을 나타냅니다.
* 값
    * 파라미터에 적용할 값입니다.
* 허용된 값
    * 파라미터에 적용할 수 있는 값의 범위입니다.
* 수정 가능
    * 파라미터의 수정 가능 여부입니다.
* 적용 유형
    * `고정`과 `동적`으로 구분됩니다.
    * `고정`인 경우 파라미터 변경 사항을 적용하려면 DB 인스턴스를 재시작해야 합니다.
    * `동적`인 경우 DB 인스턴스의 재시작 없이 바로 파라미터가 적용됩니다.
* 데이터 형식
    * 파라미터값의 형식을 나타냅니다.

### 파라미터 변수, 수식 및 함수

특정 파라미터(예를 들어 `max server memory (mb)`)들은 고정된 값을 사용하기보다는 DB 인스턴스와 연관된 값들을 이용한 수식으로 표현하는 것이 더 좋을 수 있습니다. 이를 지원하기 위해 `numeric` 데이터 형식에 대해서는 미리 정의된 변수, 수식 및 함수를 사용할 수 있습니다.

* 수식
    * `()`, `+`, `-`, `*`, `/`를 사용할 수 있습니다.
    * 수식의 결과는 항상 정수여야 하며, 소수점은 버림 처리합니다.
* 함수
    * `max(a, b, ...)`:여러 개의 값 중 가장 큰 값을 반환합니다.
    * `min(a, b, ...)`:여러 개의 값 중 가장 작은 값을 반환합니다.
* 변수
    * `ramSizeByte`:현재 DB 인스턴스 타입의 메모리 크기의 바이트값을 나타냅니다.
    * `storageSizeByte`:현재 DB 인스턴스 스토리지 크기의 바이트값을 나타냅니다.

아래 예제는 `max server memory (mb)`파라미터의 기본값이며, DB 인스턴스 타입의 메모리 크기의 3/4 크기로 설정하는 것을 나타냅니다.
```
ramSizeByte * 3 / 4 / 1048576
```

### 파라미터 변경

사용자가 생성한 파라미터 그룹만 파라미터 변경이 가능하며, 파라미터 그룹은 기존 파라미터 그룹을 복사해 새로 생성할 수 있습니다.
파라미터 그룹 안의 파라미터 변경 시, 파라미터 그룹을 사용하는 모든 DB 인스턴스에 동시에 적용됩니다. 만약 파라미터 변경 시, 해당 파라미터 그룹을 사용하는 DB 인스턴스 중 어느 하나라도 다른 작업을 진행 중이면 파라미터 변경은 불가능합니다.
DB 인스턴스에 적용 실패한다면 추후에 변경된 파라미터를 적용할 수 있습니다.

파라미터 적용 유형은 `동적`과 `고정`이 있습니다.
`동적` 파라미터는 변경 시 재시작 없이 바로 적용됩니다.
`고정` 파라미터는 재시작 이후 적용되며 `고정` 파라미터가 하나라도 변경되면 DB 인스턴스 상세 화면에 `재시작 대기 중`이 표시됩니다.

파라미터 변경 시 데이터베이스에 접속 불가 상태인 경우 데이터베이스가 재시작될 수 있습니다.
접속 불가 상태의 DB 인스턴스 파라미터 변경 시도는 실패할 수 있습니다. 정상적으로 완료되지 않으면 자동으로 관리자에게 보고되며, NHN Cloud에서 별도로 연락을 드립니다.

### 변경된 파라미터 적용

파라미터 그룹 변경이 반영되지 않은 DB 인스턴스의 파라미터를 최신화할 수 있습니다.
파라미터 변경과 동일하게 진행되지만 변경된 파라미터 적용을 누른 DB 인스턴스만 적용됩니다.

